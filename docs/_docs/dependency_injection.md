---
title: Dependency Injection
category: General
order: 4
---

React4j can be integrated with dependency injection frameworks such as [Dagger2](https://google.github.io/dagger)
and [GIN](https://code.google.com/archive/p/google-gin/). The dependency injection framework is responsible
for creating the component and injecting the required dependencies.

The author declares the dependencies of a React4j component by annotating fields or setter methods with
the `@Inject` annotation. The annotation processor then detects these dependencies and generates the required
infrastructure for injecting dependencies into the react4j component. The author can explicitly control the
injection infrastructure generated by setting the `inject` parameter on the `@ReactComponent` annotation.

The `@ReactComponent` annotation on the component can explicitly enable injection (by setting the value
of the `inject` parameter to `TRUE`), explicitly disable injection (by setting the value of the `inject`
parameter to `FALSE`) or leave value as `IF_DETECTED` to automatically determine whether the injection
infrastructure is required.

Enabling injection for a component will mean that the component will be constructed by an instance of
`javax.inject.Provider` that is expected to be provided by the injection framework. The enhanced component
subclass will have a static field for the `javax.inject.Provider` instance that must be configured prior to
instantiating the component. Enabling injection will also result in the addition of an `@javax.inject.Inject`
annotation being added to the constructor of the enhanced component subclass.

Components that extend `ReactArezComponent` have slightly different mechanisms for implementing this
functionality and tie into the [dependency injection])(https://arez.github.io/components/dependency_injection)
infrastructure provided by Arez. However there should be no practical differences from the perspective of a
React4j user.

## Dagger2

[Dagger2](https://google.github.io/dagger) is a modern take on a dependency injection framework that uses annotation
processors and statically checks the object graph at compilation time. The root objects in the graph are accessed via
a component which is an interface annotated by the `@dagger.Component` annotation. The injection rules are customized
via `@dagger.Module` annotated classes.

React4j has greater support for the dagger injection framework than GIN. The [@ReactComponent]({% api_url annotations.ReactComponent %})
annotation has a `dagger` parameter that controls whether the React4j annotation processor generates a dagger
subcomponent and supporting module. As with the `inject` parameter it can be explicitly enabled, disabled or
the default value `IF_DETECTED`. The `IF_DETECTED` value determines whether the component requires injection and
whether dagger is present on the classpath and enables dagger if these conditions are true.

If dagger is enabled then the react4j annotation processor generates an additional class named
`[ComponentName]DaggerFactory` that aims to simplify integration into dagger based infrastructure.
The infrastructure looks like:

{% highlight java %}
{% file_content react4j/examples/dagger/gen/MyComponentDaggerFactory.java "start_line=/public interface/" %}
{% endhighlight %}

Integration into a dagger component is as simple as extending the `[ComponentName]DaggerFactory`. This results
in a dagger component like:

{% highlight java %}
{% file_content react4j/examples/dagger/ExampleDaggerComponent.java "start_line=/@Singleton/" %}
{% endhighlight %}

The following code example shows how to instantiate the Dagger component and bind the `Provider`
instance to the enhanced component class. Unfortunately it is currently required that the developer
invokes the `bind[ComponentName]()` method for every component is injection enabled. In the future this
may not be required but it is at this stage.

{% highlight java %}
{% file_content react4j/examples/dagger/DaggerExample.java "start_line=/  {/" "end_line=/  }/" include_start_line=false include_end_line=false strip_block=true %}
{% endhighlight %}
